<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Requests��ѧϰ�ʼ�����Requests: HTTP for Humans
����(KENNETH REITZ)
http://httpbin.org
���� GitHub API ѧϰhttps://developer.github.com
���󷽷� GET: �鿴��Դ
 POST: ������Դ

 PUT: �޸����� 
 DELETE: ɾ����Դ

 HE">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Requests">
<meta property="og:url" content="http://www.heywe.cn/2017/03/01/Python-Requests/index.html">
<meta property="og:site_name" content="MyBlog OvO">
<meta property="og:description" content="Requests��ѧϰ�ʼ�����Requests: HTTP for Humans
����(KENNETH REITZ)
http://httpbin.org
���� GitHub API ѧϰhttps://developer.github.com
���󷽷� GET: �鿴��Դ
 POST: ������Դ

 PUT: �޸����� 
 DELETE: ɾ����Դ

 HE">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/006tKfTcgy1fd6i610odyj31480k6gse.jpg">
<meta property="og:updated_time" content="2017-03-01T03:17:35.818Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python Requests">
<meta name="twitter:description" content="Requests��ѧϰ�ʼ�����Requests: HTTP for Humans
����(KENNETH REITZ)
http://httpbin.org
���� GitHub API ѧϰhttps://developer.github.com
���󷽷� GET: �鿴��Դ
 POST: ������Դ

 PUT: �޸����� 
 DELETE: ɾ����Դ

 HE">
<meta name="twitter:image" content="https://ww2.sinaimg.cn/large/006tKfTcgy1fd6i610odyj31480k6gse.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.heywe.cn/2017/03/01/Python-Requests/"/>





  <title> Python Requests | MyBlog OvO </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ab6bc7acdcb5d335c2d015162bfc8c31";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">MyBlog OvO</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.heywe.cn/2017/03/01/Python-Requests/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Mr.Wu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://ww2.sinaimg.cn/large/006tKfTcgy1fcxx4zsi16j302s02s3yn.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="MyBlog OvO">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="MyBlog OvO" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Python Requests
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-01T11:14:51+08:00">
                2017-03-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/requests/" itemprop="url" rel="index">
                    <span itemprop="name">requests</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/01/Python-Requests/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/01/Python-Requests/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/03/01/Python-Requests/" class="leancloud_visitors" data-flag-title="Python Requests">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Requests��ѧϰ�ʼ�"><a href="#Requests��ѧϰ�ʼ�" class="headerlink" title="Requests��ѧϰ�ʼ�"></a>Requests��ѧϰ�ʼ�</h1><h2 id="����"><a href="#����" class="headerlink" title="����"></a>����</h2><p><a href="http://docs.python-requests.org/en/master/" target="_blank" rel="external">Requests: HTTP for Humans</a><br></p>
<p>����(<a href="https://www.kennethreitz.org" target="_blank" rel="external">KENNETH REITZ</a>)</p>
<p><a href="http://httpbin.org" target="_blank" rel="external">http://httpbin.org</a></p>
<h2 id="����-GitHub-API-ѧϰ"><a href="#����-GitHub-API-ѧϰ" class="headerlink" title="���� GitHub API ѧϰ"></a>���� GitHub API ѧϰ</h2><p><a href="https://developer.github.com" target="_blank" rel="external">https://developer.github.com</a></p>
<h3 id="���󷽷�"><a href="#���󷽷�" class="headerlink" title="���󷽷�"></a>���󷽷�</h3><font color="red" size="2"><br><br><em> GET: �鿴��Դ<br>
</em> POST: ������Դ<br><br></font>

<font color="blue" size="2"><br><br><em> PUT: �޸�����<br> 
</em> DELETE: ɾ����Դ<br><br></font>

<font color="orange" size="2"><br><br><em> HEAD: �鿴��Ӧͷ<br> 
</em> OPTIONS: �鿴�������󷽷�<br><br></font>


<h3 id="������������"><a href="#������������" class="headerlink" title="������������"></a>������������</h3><ol>
<li><p>URL Parameters: URL����</p>
<ul>
<li><a href="https://list.tmall.com/search_product.html?" target="_blank" rel="external">https://list.tmall.com/search_product.html?</a><font color="red">cat=50514037&amp;…</font></li>
<li>params: requests.get(url,<code>params</code>={‘key1’:’value1’})</li>
</ul>
</li>
<li><p>���������ύ��</p>
<ul>
<li>Content-Type: application/x-www-form-urlencoded</li>
<li>����: key1=value1&amp;key2=value2</li>
<li>requests.post(url,data={‘key1’:’value1’,’key2’:’value2’})</li>
</ul>
</li>
<li><p>json�����ύ��</p>
<ul>
<li>Content-Type: application/json</li>
<li>����: ‘{‘key1’:’value1’,’key2’:’value2’}’</li>
<li>requests.post(url,json={‘key1’:’value1’,’key2’:’value2’})</li>
</ul>
</li>
</ol>
<h3 id="�����쳣����"><a href="#�����쳣����" class="headerlink" title="�����쳣����"></a>�����쳣����</h3><p><code>requests��</code>�������쳣���̳���<code>requests.exceptions.RequestException</code>��<br></p>
<style> 
.div-a{ float:left;width:49%;border:1px solid #FFF8DC;background:white;float:left;} 
.div-b{ float:left;width:49%;border:1px solid #FFF8DC;background:white;float:right;} 
</style> 

<p><body> </body></p>
<div class="div-a"><br><br>+ BaseHTTPError<br>+ ChunkedEncodingError<br>+ ConnectTimeout<br>+ ConnectionError<br>+ ContentDecodingError<br>+ HTTPError<br>+ InvalidSchema<br>+ InvalidURL<br>+ MissingSchema<br><br></div> 

<p> </p>
<p><body> </body></p>
<div class="div-b">

<ul>
<li>ProxyError</li>
<li>ReadTimeout</li>
<li>RequestException</li>
<li>RetryError</li>
<li>SSLError</li>
<li>StreamConsumedError</li>
<li>Timeout</li>
<li>TooMangRedirects</li>
<li>URLRequired<br></li></ul></div><br><br><br><br><center>����request�������������쳣</center><br><br><blockquote>
<p>���г�����<br><br>ConnectionError  ��������ԭ�����޷��������ӡ�<br><br>HTTPError ������Ӧ��״̬�벻Ϊ200,Response.raise_for_status()���׳�HTTPError �쳣��<br><br>Timeout ��ʱ�쳣��<br><br>TooManyRedirects �����󳬹����趨�������ض��������������׳�һTooManyRedirects �쳣��</p>
</blockquote>


<ul>
<li>������ʱ����<br></li>
</ul>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">requests.get(url,timeout=(<span class="number">3</span>,<span class="number">7</span>))   <span class="comment"># TCPЭ����������,����1���̵ȴ�3��,2���̵ȴ�7��</span></div><div class="line">requests.get(url,timeout=<span class="number">10</span>)   <span class="comment"># �ܹ���10��</span></div><div class="line"></div><div class="line">&gt; requests.exceptions.Timeout</div></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>HTTPError</li>
</ul>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; requests.exceptions.HTTPError</div></pre></td></tr></table></figure>
</blockquote>
<h3 id="�Զ���-Request"><a href="#�Զ���-Request" class="headerlink" title="�Զ��� Request"></a>�Զ��� Request</h3><p>ͨ��Request Sessionʵ��</p>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> requests <span class="keyword">import</span> Request, Session</div></pre></td></tr></table></figure>
</blockquote>
<h3 id="����ʵ��֮j��һ��ʵ��"><a href="#����ʵ��֮j��һ��ʵ��" class="headerlink" title="����ʵ��֮ǰ��һ��ʵ��"></a>����ʵ��֮ǰ��һ��ʵ��</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ���ǵ���githubһЩ��apiд��ʵ��</span></div><div class="line"><span class="comment">#! /usr/bin/.env python3</span></div><div class="line"><span class="comment">#-*- coding: utf-8 -*-</span></div><div class="line"><span class="keyword">import</span> json</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line">url = <span class="string">'http://api.github.com'</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_uri</span><span class="params">(endpoint)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'/'</span>.join([url, endpoint])</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">better_print</span><span class="params">(json_str)</span>:</span></div><div class="line">    <span class="keyword">return</span> json.dumps(json.loads(json_str), indent=<span class="number">4</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">request_method</span><span class="params">()</span>:</span></div><div class="line">    response = requests.get(build_uri(<span class="string">'user/emails'</span>),</div><div class="line">                            auth=(<span class="string">'usrname'</span>, <span class="string">'password'</span>)) <span class="comment"># GitHub���û���������</span></div><div class="line">    print(better_print(response.text))</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">params_request</span><span class="params">()</span>:</span></div><div class="line">    response = requests.get(build_uri(<span class="string">'users'</span>), params=&#123;<span class="string">'since'</span>: <span class="number">11</span>&#125;)</div><div class="line">    print(better_print(response.text))</div><div class="line">    print(response.headers)</div><div class="line">    print(response.url)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">json_request</span><span class="params">()</span>:</span></div><div class="line">    response = requests.patch(</div><div class="line">        build_uri(<span class="string">'user'</span>),</div><div class="line">        auth=(<span class="string">'usrname'</span>, <span class="string">'password'</span>), <span class="comment"># GitHub���û���������</span></div><div class="line">        json=&#123;<span class="string">'name'</span>: <span class="string">'xxx'</span>,</div><div class="line">              <span class="string">'email'</span>: <span class="string">'111@qq.com'</span>&#125;) <span class="comment"># ���ĵ����ֺ�����</span></div><div class="line">    print(better_print(response.text))</div><div class="line">    print(response.headers)</div><div class="line">    print(response.body)</div><div class="line">    print(response.status_code)</div><div class="line">    print(response.reason)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">timeout_request</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        response = requests.get(build_uri(<span class="string">'user/emails'</span>), timeout=<span class="number">0.1</span>)</div><div class="line">        response.raise_for_status()</div><div class="line">    <span class="keyword">except</span> requests.exceptions.Timeout <span class="keyword">as</span> e:</div><div class="line">        print(e)</div><div class="line">    <span class="keyword">except</span> requests.exceptions.HTTPError <span class="keyword">as</span> e:</div><div class="line">        print(e)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        print(requests.text)</div><div class="line">        print(response.text)</div><div class="line">        print(response.status_code)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">hard_requests</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">from</span> requests <span class="keyword">import</span> Request, Session</div><div class="line">    s = Session()</div><div class="line">    headers = &#123;<span class="string">'User-Agent'</span>: <span class="string">'fake1.3.4'</span>&#125;  <span class="comment"># α��UA</span></div><div class="line">    req = requests.Request(</div><div class="line">        <span class="string">'GET'</span>,</div><div class="line">        build_uri(<span class="string">'user/emails'</span>),</div><div class="line">        auth=(<span class="string">'usrname'</span>, <span class="string">'password'</span>), <span class="comment"># GitHub���û���������</span></div><div class="line">        headers=headers)</div><div class="line">    prepped = req.prepare()</div><div class="line">    print(prepped.body)</div><div class="line">    print(prepped.headers)</div><div class="line"></div><div class="line">    resp = s.send(prepped, timeout=<span class="number">5</span>)</div><div class="line">    print(resp.status_code)</div><div class="line">    print(resp.request.headers)</div><div class="line">    print(resp.text)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    hard_requests()</div></pre></td></tr></table></figure>
<h3 id="��Ӧ����API"><a href="#��Ӧ����API" class="headerlink" title="��Ӧ����API"></a>��Ӧ����API</h3><p><a href="http://baike.baidu.com/link?url=OSkx-CgOXOO8O7TLAPJ7Zy-bXYfOCkVVwYIINzepYb2JugoMU7LzQevcjLwXWPeqfQr92kSihgvqEY82bRPdqbM4OZgK_vjl3Nm7ZQfsX8L6wPolI1Ei5U1dEhboAP7n" target="_blank" rel="external">�ٶȰٿƣ�HTTP״̬��</a></p>
<p>1XX:��Ϣ <br>2XX:�ɹ� <br>3XX:�ض��� <br>4XX����(�ͻ���)���� <br>5XX���������� <br>600:Դվû�з�����Ӧͷ����ֻ����ʵ������</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> requests</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response = requests.get(<span class="string">'https://api.github.com'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.status_code</div><div class="line"><span class="number">200</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.reason</div><div class="line"><span class="string">'OK'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.headers</div><div class="line">&#123;<span class="string">'X-GitHub-Media-Type'</span>: <span class="string">'github.v3; format=json'</span>, <span class="string">'X-RateLimit-Reset'</span>: <span class="string">'1488289215'</span>, <span class="string">'Content-Type'</span>: <span class="string">'application/json; charset=utf-8'</span>, <span class="string">'ETag'</span>: <span class="string">'W/"7dc470913f1fe9bb6c7355b50a0737bc"'</span>, <span class="string">'Date'</span>: <span class="string">'Tue, 28 Feb 2017 12:40:15 GMT'</span>, <span class="string">'Content-Security-Policy'</span>: <span class="string">"default-src 'none'"</span>, <span class="string">'Transfer-Encoding'</span>: <span class="string">'chunked'</span>, <span class="string">'Server'</span>: <span class="string">'GitHub.com'</span>, <span class="string">'Content-Encoding'</span>: <span class="string">'gzip'</span>, <span class="string">'Cache-Control'</span>: <span class="string">'public, max-age=60, s-maxage=60'</span>, <span class="string">'X-Content-Type-Options'</span>: <span class="string">'nosniff'</span>, <span class="string">'X-XSS-Protection'</span>: <span class="string">'1; mode=block'</span>, <span class="string">'Access-Control-Expose-Headers'</span>: <span class="string">'ETag, Link, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval'</span>, <span class="string">'X-GitHub-Request-Id'</span>: <span class="string">'6E6D:0DDE:61E3A4:7ACD2E:58B56FA3'</span>, <span class="string">'Strict-Transport-Security'</span>: <span class="string">'max-age=31536000; includeSubdomains; preload'</span>, <span class="string">'X-Served-By'</span>: <span class="string">'07ff1c8a09e44b62e277fae50a1b1dc4'</span>, <span class="string">'Access-Control-Allow-Origin'</span>: <span class="string">'*'</span>, <span class="string">'X-Frame-Options'</span>: <span class="string">'deny'</span>, <span class="string">'Vary'</span>: <span class="string">'Accept, Accept-Encoding'</span>, <span class="string">'X-RateLimit-Remaining'</span>: <span class="string">'59'</span>, <span class="string">'Status'</span>: <span class="string">'200 OK'</span>, <span class="string">'X-RateLimit-Limit'</span>: <span class="string">'60'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.url</div><div class="line"><span class="string">'https://api.github.com/'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.history</div><div class="line">[]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response = requests.get(<span class="string">'http://api.github.com'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.history</div><div class="line">[&lt;Response [<span class="number">301</span>]&gt;]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.elapsed</div><div class="line">datetime.timedelta(<span class="number">0</span>, <span class="number">1</span>, <span class="number">664629</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.request</div><div class="line">&lt;PreparedRequest [GET]&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response</div><div class="line">&lt;Response [<span class="number">200</span>]&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.encoding</div><div class="line"><span class="string">'utf-8'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.raw.read(<span class="number">10</span>)</div><div class="line"><span class="string">b''</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.json()[<span class="string">'team_url'</span>]</div><div class="line"><span class="string">'https://api.github.com/teams'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.content</div><div class="line"><span class="string">b'&#123;"current_user_url":"https://api.github.com/user","current_user_authorizations_html_url":"https://github.com/settings/connections/applications&#123;/client_id&#125;","authorizations_url":"https://api.github.com/authorizations","code_search_url":"https://api.github.com/search/code?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;","commit_search_url":"https://api.github.com/search/commits?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;","emails_url":"https://api.github.com/user/emails","emojis_url":"https://api.github.com/emojis","events_url":"https://api.github.com/events","feeds_url":"https://api.github.com/feeds","followers_url":"https://api.github.com/user/followers","following_url":"https://api.github.com/user/following&#123;/target&#125;","gists_url":"https://api.github.com/gists&#123;/gist_id&#125;","hub_url":"https://api.github.com/hub","issue_search_url":"https://api.github.com/search/issues?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;","issues_url":"https://api.github.com/issues","keys_url":"https://api.github.com/user/keys","notifications_url":"https://api.github.com/notifications","organization_repositories_url":"https://api.github.com/orgs/&#123;org&#125;/repos&#123;?type,page,per_page,sort&#125;","organization_url":"https://api.github.com/orgs/&#123;org&#125;","public_gists_url":"https://api.github.com/gists/public","rate_limit_url":"https://api.github.com/rate_limit","repository_url":"https://api.github.com/repos/&#123;owner&#125;/&#123;repo&#125;","repository_search_url":"https://api.github.com/search/repositories?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;","current_user_repositories_url":"https://api.github.com/user/repos&#123;?type,page,per_page,sort&#125;","starred_url":"https://api.github.com/user/starred&#123;/owner&#125;&#123;/repo&#125;","starred_gists_url":"https://api.github.com/gists/starred","team_url":"https://api.github.com/teams","user_url":"https://api.github.com/users/&#123;user&#125;","user_organizations_url":"https://api.github.com/user/orgs","user_repositories_url":"https://api.github.com/users/&#123;user&#125;/repos&#123;?type,page,per_page,sort&#125;","user_search_url":"https://api.github.com/search/users?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;"&#125;'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>response.text</div><div class="line"><span class="string">'&#123;"current_user_url":"https://api.github.com/user","current_user_authorizations_html_url":"https://github.com/settings/connections/applications&#123;/client_id&#125;","authorizations_url":"https://api.github.com/authorizations","code_search_url":"https://api.github.com/search/code?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;","commit_search_url":"https://api.github.com/search/commits?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;","emails_url":"https://api.github.com/user/emails","emojis_url":"https://api.github.com/emojis","events_url":"https://api.github.com/events","feeds_url":"https://api.github.com/feeds","followers_url":"https://api.github.com/user/followers","following_url":"https://api.github.com/user/following&#123;/target&#125;","gists_url":"https://api.github.com/gists&#123;/gist_id&#125;","hub_url":"https://api.github.com/hub","issue_search_url":"https://api.github.com/search/issues?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;","issues_url":"https://api.github.com/issues","keys_url":"https://api.github.com/user/keys","notifications_url":"https://api.github.com/notifications","organization_repositories_url":"https://api.github.com/orgs/&#123;org&#125;/repos&#123;?type,page,per_page,sort&#125;","organization_url":"https://api.github.com/orgs/&#123;org&#125;","public_gists_url":"https://api.github.com/gists/public","rate_limit_url":"https://api.github.com/rate_limit","repository_url":"https://api.github.com/repos/&#123;owner&#125;/&#123;repo&#125;","repository_search_url":"https://api.github.com/search/repositories?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;","current_user_repositories_url":"https://api.github.com/user/repos&#123;?type,page,per_page,sort&#125;","starred_url":"https://api.github.com/user/starred&#123;/owner&#125;&#123;/repo&#125;","starred_gists_url":"https://api.github.com/gists/starred","team_url":"https://api.github.com/teams","user_url":"https://api.github.com/users/&#123;user&#125;","user_organizations_url":"https://api.github.com/user/orgs","user_repositories_url":"https://api.github.com/users/&#123;user&#125;/repos&#123;?type,page,per_page,sort&#125;","user_search_url":"https://api.github.com/search/users?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;"&#125;'</span></div></pre></td></tr></table></figure>
<h2 id="����-1"><a href="#����-1" class="headerlink" title="����"></a>����</h2><h3 id="�Զ�����ͼT-�l�"><a href="#�Զ�����ͼT-�l�" class="headerlink" title="�Զ�����ͼƬ/�ļ�"></a>�Զ�����ͼƬ/�ļ�</h3><ol>
<li>������ģ��</li>
<li>����request</li>
<li>��ȡ��data</li>
<li>��������</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="string">'''demo:����ͼƬ</span></div><div class="line">'''</div><div class="line"><span class="comment">#-*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_image</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    headers = &#123;</div><div class="line">        <span class="string">'User-Agent'</span>:</div><div class="line">        <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36'</span></div><div class="line">    &#125;</div><div class="line">    url = <span class="string">'https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1488296531013&amp;di=689048e17449c05f7d55698526a71ccc&amp;imgtype=0&amp;src=http%3A%2F%2Fpic.baike.soso.com%2Fp%2F20130515%2F20130515150325-379335333.jpg'</span></div><div class="line">    response = requests.get(url, headers=headers, stream=<span class="keyword">True</span>)  <span class="comment"># �����룬���ַ���û�йر���</span></div><div class="line">    <span class="keyword">with</span> open(<span class="string">'demo.jpg'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> fd:</div><div class="line">        <span class="keyword">for</span> chunk <span class="keyword">in</span> response.iter_content(<span class="number">128</span>):</div><div class="line">            fd.write(chunk)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_image_improved</span><span class="params">()</span>:</span>  <span class="comment"># ����ʹ����һ��python���﷨��,���ر���</span></div><div class="line">    <span class="comment"># α��headers��Ϣ</span></div><div class="line">    headers = &#123;</div><div class="line">        <span class="string">'User-Agent'</span>:</div><div class="line">        <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36'</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment"># �޶�url,����������Ҫ����ͼƬ�ĵ�ַ</span></div><div class="line">    url = <span class="string">'https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1488296531013&amp;di=689048e17449c05f7d55698526a71ccc&amp;imgtype=0&amp;src=http%3A%2F%2Fpic.baike.soso.com%2Fp%2F20130515%2F20130515150325-379335333.jpg'</span></div><div class="line">    response = requests.get(url, headers=headers, stream=<span class="keyword">True</span>)</div><div class="line">    <span class="keyword">from</span> contextlib <span class="keyword">import</span> closing</div><div class="line">    <span class="keyword">with</span> closing(requests.get(url, headers=headers, stream=<span class="keyword">True</span>)) <span class="keyword">as</span> response:</div><div class="line">        <span class="comment"># �����ļ�</span></div><div class="line">        <span class="keyword">with</span> open(<span class="string">'demo1.jpg'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> fd:</div><div class="line">            <span class="comment"># ÿ128д��һ��</span></div><div class="line">            <span class="keyword">for</span> chunk <span class="keyword">in</span> response.iter_content(<span class="number">128</span>):</div><div class="line">                fd.write(chunk)</div><div class="line"></div><div class="line">download_image_improved()</div></pre></td></tr></table></figure>
<h3 id="�¼�����-Event-Hooks"><a href="#�¼�����-Event-Hooks" class="headerlink" title="�¼�����(Event Hooks)"></a>�¼�����(Event Hooks)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding: utf-8 -*-</span></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_key_info</span><span class="params">(response, *args, **kwargs)</span>:</span></div><div class="line">    print(response.headers[<span class="string">'Content-Type'</span>])</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    requests.get(<span class="string">'https://www.baidu.com'</span>, hooks=dict(response=get_key_info))</div><div class="line"></div><div class="line"></div><div class="line">main()</div></pre></td></tr></table></figure>
<h3 id="HTTP��֤"><a href="#HTTP��֤" class="headerlink" title="HTTP��֤"></a>HTTP��֤</h3><center><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fd6i610odyj31480k6gse.jpg" alt=""><br><br>HTTP������֤</center>

<h3 id="OAUTH��֤"><a href="#OAUTH��֤" class="headerlink" title="OAUTH��֤"></a>OAUTH��֤</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding: utf-8 -*-</span></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line">url = <span class="string">'https://api.github.com'</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">construct_url</span><span class="params">(endpoint)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'/'</span>.join([url, endpoint])</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">basic_auth</span><span class="params">()</span>:</span></div><div class="line">    response = requests.get(construct_url(<span class="string">'user'</span>),</div><div class="line">                            auth=(<span class="string">'usrname'</span>, <span class="string">'password'</span>))</div><div class="line">    print(response.text)</div><div class="line">    print(response.request.headers)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">basic_oauth</span><span class="params">()</span>:</span>                      <span class="comment"># ��һ��ʵ��</span></div><div class="line">    headers = &#123;<span class="string">'Authorization'</span>:<span class="string">'token xxxxPersonal access tokens'</span>&#125;   <span class="comment">#����token��GitHub��Personal access tokens</span></div><div class="line">    response = requests.get(construct_url(<span class="string">'user/emails'</span>),headers=headers)</div><div class="line">    print(response.request.headers)</div><div class="line">    print(response.text)</div><div class="line">    print(response.status_code)</div><div class="line"></div><div class="line"><span class="keyword">from</span> requests.auth <span class="keyword">import</span> AuthBase      <span class="comment"># �ڶ���������������ʵ��</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GithubAuth</span><span class="params">(AuthBase)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, token)</span>:</span></div><div class="line">        self.token = token</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, r)</span>:</span></div><div class="line">        <span class="comment"># requests �� headers</span></div><div class="line">        r.headers[<span class="string">'Authorization'</span>]=<span class="string">' '</span>.join([<span class="string">'token'</span>,self.token])</div><div class="line">        <span class="keyword">return</span> r</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">oauth_advanced</span><span class="params">()</span>:</span></div><div class="line">    auth = GithubAuth(<span class="string">'xxxxPersonal access tokens'</span>)</div><div class="line">    response = requests.get(construct_url(<span class="string">'user/emails'</span>),auth=auth)</div><div class="line">    print(response.request.headers)</div><div class="line">    print(response.text)</div><div class="line">    print(response.status_code)</div><div class="line"></div><div class="line">basic_oauth()</div><div class="line">oauth_advanced()</div></pre></td></tr></table></figure>
<h3 id="����-Proxy"><a href="#����-Proxy" class="headerlink" title="����(Proxy)"></a>����(Proxy)</h3><ol>
<li>������������Heroku</li>
<li>������1080�˿�����Socks����</li>
<li>������ת����1080�˿�</li>
<li>��ȡ��Ӧ��Դ</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> requests</div><div class="line">proxies = &#123;</div><div class="line">    <span class="string">'http'</span>: <span class="string">'socks5://127.0.0.1:1080'</span>,</div><div class="line">    <span class="string">'https'</span>: <span class="string">'socks5://127.0.0.1:1080'</span></div><div class="line">&#125;</div><div class="line">url = <span class="string">'https://www.facebook.com'</span></div><div class="line">response = requests.get(url, timeout=<span class="number">3</span>)  <span class="comment"># ����û��Ӧ�ô������ʲ���</span></div><div class="line">response = requests.get(url, proxies=proxies, timeout=<span class="number">3</span>) <span class="comment"># �����ɹ�����</span></div><div class="line">print(response.status_code) <span class="comment"># ����200</span></div></pre></td></tr></table></figure>
<h3 id="Session-��-Cookie"><a href="#Session-��-Cookie" class="headerlink" title="Session �� Cookie"></a>Session �� Cookie</h3><ul>
<li>Session  �������洢����</li>
<li>Cookie �������洢����</li>
</ul>
<blockquote>
<p>Session �����þ������� Web�������ϱ����û���״̬��Ϣ�����κ�ʱ�����κ��豸�ϵ�ҳ�����з��ʡ���Ϊ����������Ҫ�洢�κ�������Ϣ�����Կ���ʹ���κ�����������ʹ���� Pad ���ֻ��������������豸��</p>
<p>��Cookie����С����Ϣ�����������������ͳ����Դ洢�������������ϣ��Ӷ��´���λ��һ�޶��ķÿ��ֻص�������������ʱ���ɴӸ����������ش���Ϣ�����Ǻ����õģ�����������ס��λ�ÿ͵��ض���Ϣ�����ϴη��ʵ�λ�á����ѵ�ʱ�����û���ѡ�����ʽ������Cookie �Ǹ��洢��������Ŀ¼���ı��ļ���������������ʱ���洢�� RAM �С�һ�����Ӹ���վ�������������˳���Cookie Ҳ�ɴ洢�ڼ�������Ӳ���ϡ����ÿͽ������������Ի�ʱ������ֹ������ Cookie��</p>
</blockquote>
<hr>
<p>Դ��(python3.x)����iMOOC�Ŀγ�<br><a href="http://www.imooc.com/learn/736" target="_blank" rel="external">Python-�߽�Requests��</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/02/21/AboutDropout/" rel="next" title="AboutDropout">
                <i class="fa fa-chevron-left"></i> AboutDropout
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2017/03/01/Python-Requests/"
           data-title="Python Requests" data-url="http://www.heywe.cn/2017/03/01/Python-Requests/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://ww2.sinaimg.cn/large/006tKfTcgy1fcxx4zsi16j302s02s3yn.jpg"
               alt="Mr.Wu" />
          <p class="site-author-name" itemprop="name">Mr.Wu</p>
           
              <p class="site-description motion-element" itemprop="description">春水初生,春林初盛,春风十里,不如你.</p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ackness" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Requests��ѧϰ�ʼ�"><span class="nav-number">1.</span> <span class="nav-text">Requests��ѧϰ�ʼ�</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#����"><span class="nav-number">1.1.</span> <span class="nav-text">����</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#����-GitHub-API-ѧϰ"><span class="nav-number">1.2.</span> <span class="nav-text">���� GitHub API ѧϰ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#���󷽷�"><span class="nav-number">1.2.1.</span> <span class="nav-text">���󷽷�</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#������������"><span class="nav-number">1.2.2.</span> <span class="nav-text">������������</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#�����쳣����"><span class="nav-number">1.2.3.</span> <span class="nav-text">�����쳣����</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#�Զ���-Request"><span class="nav-number">1.2.4.</span> <span class="nav-text">�Զ��� Request</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#����ʵ��֮j��һ��ʵ��"><span class="nav-number">1.2.5.</span> <span class="nav-text">����ʵ��֮ǰ��һ��ʵ��</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��Ӧ����API"><span class="nav-number">1.2.6.</span> <span class="nav-text">��Ӧ����API</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#����-1"><span class="nav-number">1.3.</span> <span class="nav-text">����</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#�Զ�����ͼT-�l�"><span class="nav-number">1.3.1.</span> <span class="nav-text">�Զ�����ͼƬ/�ļ�</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#�¼�����-Event-Hooks"><span class="nav-number">1.3.2.</span> <span class="nav-text">�¼�����(Event Hooks)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP��֤"><span class="nav-number">1.3.3.</span> <span class="nav-text">HTTP��֤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OAUTH��֤"><span class="nav-number">1.3.4.</span> <span class="nav-text">OAUTH��֤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#����-Proxy"><span class="nav-number">1.3.5.</span> <span class="nav-text">����(Proxy)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Session-��-Cookie"><span class="nav-number">1.3.6.</span> <span class="nav-text">Session �� Cookie</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr.Wu</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"heywe"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  













  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("j7tOdKhEE2pKVLIyH8bwna8d-gzGzoHsz", "g7k1HlUKw6IDpMo2514FMnnh");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


  

</body>
</html>
